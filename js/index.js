!function e(t,n,o){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,(function(e){return i(t[s][1][e]||e)}),l,l.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){var o,i;o=this,i=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,r=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){s=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(s)throw i}}}}var l={};l[l.Fatal=0]="Fatal",l[l.Error=0]="Error",l[l.Warn=1]="Warn",l[l.Log=2]="Log",l[l.Info=3]="Info",l[l.Success=3]="Success",l[l.Debug=4]="Debug",l[l.Trace=5]="Trace",l[l.Silent=-1/0]="Silent",l[l.Verbose=1/0]="Verbose";var f={silent:{level:-1},fatal:{level:l.Fatal},error:{level:l.Error},warn:{level:l.Warn},log:{level:l.Log},info:{level:l.Info},success:{level:l.Success},debug:{level:l.Debug},trace:{level:l.Trace},verbose:{level:l.Trace},ready:{level:l.Info},start:{level:l.Info}},h=!1,p=[],y=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var o in e(this,t),this._reporters=n.reporters||[],this._types=n.types||f,this.level=void 0!==n.level?n.level:3,this._defaults=n.defaults||{},this._async=void 0!==n.async?n.async:void 0,this._stdout=n.stdout,this._stderr=n.stderr,this._mockFn=n.mockFn,this._throttle=n.throttle||1e3,this._throttleMin=n.throttleMin||5,this._types){var i=r(r({type:o},this._types[o]),this._defaults);this[o]=this._wrapLogFn(i),this[o].raw=this._wrapLogFn(i,!0)}this._mockFn&&this.mockTypes(),this._lastLogSerialized=void 0,this._lastLog=void 0,this._lastLogTime=void 0,this._lastLogCount=0,this._throttleTimeout=void 0}return n(t,[{key:"create",value:function(e){return new t(Object.assign({reporters:this._reporters,level:this.level,types:this._types,defaults:this._defaults,stdout:this._stdout,stderr:this._stderr,mockFn:this._mockFn},e))}},{key:"withDefaults",value:function(e){return this.create({defaults:Object.assign({},this._defaults,e)})}},{key:"withTag",value:function(e){return this.withDefaults({tag:this._defaults.tag?this._defaults.tag+":"+e:e})}},{key:"addReporter",value:function(e){return this._reporters.push(e),this}},{key:"removeReporter",value:function(e){if(e){var t=this._reporters.indexOf(e);if(t>=0)return this._reporters.splice(t,1)}else this._reporters.splice(0);return this}},{key:"setReporters",value:function(e){return this._reporters=Array.isArray(e)?e:[e],this}},{key:"wrapAll",value:function(){this.wrapConsole(),this.wrapStd()}},{key:"restoreAll",value:function(){this.restoreConsole(),this.restoreStd()}},{key:"wrapConsole",value:function(){for(var e in this._types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}},{key:"restoreConsole",value:function(){for(var e in this._types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}},{key:"wrapStd",value:function(){this._wrapStream(this.stdout,"log"),this._wrapStream(this.stderr,"log")}},{key:"_wrapStream",value:function(e,t){var n=this;e&&(e.__write||(e.__write=e.write),e.write=function(e){n[t].raw(String(e).trim())})}},{key:"restoreStd",value:function(){this._restoreStream(this.stdout),this._restoreStream(this.stderr)}},{key:"_restoreStream",value:function(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}},{key:"pauseLogs",value:function(){h=!0}},{key:"resumeLogs",value:function(){h=!1;var e,t=c(p.splice(0));try{for(t.s();!(e=t.n()).done;){var n=e.value;n[0]._logFn(n[1],n[2])}}catch(e){t.e(e)}finally{t.f()}}},{key:"mockTypes",value:function(e){if(this._mockFn=e||this._mockFn,"function"==typeof this._mockFn)for(var t in this._types)this[t]=this._mockFn(t,this._types[t])||this[t],this[t].raw=this[t]}},{key:"_wrapLogFn",value:function(e,t){var n=this;return function(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];if(!h)return n._logFn(e,i,t);p.push([n,e,i,t])}}},{key:"_logFn",value:function(e,t,n){var o=this;if(e.level>this.level)return!!this._async&&Promise.resolve(!1);var i=Object.assign({date:new Date,args:[]},e);!n&&1===t.length&&function(e){return t=e,!("[object Object]"!==Object.prototype.toString.call(t)||!e.message&&!e.args||e.stack);var t}(t[0])?Object.assign(i,t[0]):i.args=Array.from(t),i.message&&(i.args.unshift(i.message),delete i.message),i.additional&&(Array.isArray(i.additional)||(i.additional=i.additional.split("\n")),i.args.push("\n"+i.additional.join("\n")),delete i.additional),i.type="string"==typeof i.type?i.type.toLowerCase():"",i.tag="string"==typeof i.tag?i.tag.toLowerCase():"";var a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=o._lastLogCount-o._throttleMin;if(o._lastLog&&t>0){var n=s(o._lastLog.args);t>1&&n.push("(repeated ".concat(t," times)")),o._log(r(r({},o._lastLog),{},{args:n})),o._lastLogCount=1}if(e){if(o._lastLog=i,o._async)return o._logAsync(i);o._log(i)}};clearTimeout(this._throttleTimeout);var u=this._lastLogTime?i.date-this._lastLogTime:0;if(this._lastLogTime=i.date,u<this._throttle)try{var c=JSON.stringify([i.type,i.tag,i.args]),l=this._lastLogSerialized===c;if(this._lastLogSerialized=c,l&&(this._lastLogCount++,this._lastLogCount>this._throttleMin))return void(this._throttleTimeout=setTimeout(a,this._throttle))}catch(e){}a(!0)}},{key:"_log",value:function(e){var t,n=c(this._reporters);try{for(n.s();!(t=n.n()).done;)t.value.log(e,{async:!1,stdout:this.stdout,stderr:this.stderr})}catch(e){n.e(e)}finally{n.f()}}},{key:"_logAsync",value:function(e){var t=this;return Promise.all(this._reporters.map((function(n){return n.log(e,{async:!0,stdout:t.stdout,stderr:t.stderr})})))}},{key:"stdout",get:function(){return this._stdout||console._stdout}},{key:"stderr",get:function(){return this._stderr||console._stderr}}]),t}();y.prototype.add=y.prototype.addReporter,y.prototype.remove=y.prototype.removeReporter,y.prototype.clear=y.prototype.removeReporter,y.prototype.withScope=y.prototype.withTag,y.prototype.mock=y.prototype.mockTypes,y.prototype.pause=y.prototype.pauseLogs,y.prototype.resume=y.prototype.resumeLogs;var d,g=function(){function t(n){e(this,t),this.options=Object.assign({},n),this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}return n(t,[{key:"log",value:function(e){var t=e.level<1?console.__error||console.error:1===e.level&&console.warn?console.__warn||console.warn:console.__log||console.log,n="log"!==e.type?e.type:"",o=e.tag?e.tag:"",i=this.typeColorMap[e.type]||this.levelColorMap[e.level]||this.defaultColor,r="\n      background: ".concat(i,";\n      border-radius: 0.5em;\n      color: white;\n      font-weight: bold;\n      padding: 2px 0.5em;\n    "),a="%c".concat([o,n].filter(Boolean).join(":"));"string"==typeof e.args[0]?t.apply(void 0,["".concat(a,"%c ").concat(e.args[0]),r,""].concat(s(e.args.slice(1)))):t.apply(void 0,[a,r].concat(s(e.args)))}}]),t}();return"undefined"!=typeof window&&window.consola||((d=new y({reporters:[new g]})).Consola=y,d.LogLevel=l,d.BrowserReporter=g,d)},"object"==typeof n&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):(o=o||self).consola=i()},{}],2:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=y(e("./config")),r=y(e("scenes/PreloadScene")),s=y(e("scenes/MainScene")),a=y(e("scenes/MenuScene")),u=y(e("scenes/UIScene")),c=y(e("./scenes/SoundManagerScene")),l=y(e("./scenes/GameOverScene")),f=y(e("./scenes/VictoryScene")),h=y(e("./scenes/InstructionsScene")),p=y(e("./scenes/BackstoryScene"));function y(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,Phaser.Game);var t=g(n);function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e={type:Phaser.AUTO,scale:{mode:Phaser.Scale.FIT,parent:"phaser-game",autoCenter:Phaser.Scale.CENTER_BOTH,width:i.default.GAME_WIDTH,height:i.default.GAME_HEIGHT},physics:{default:"matter",matter:{debug:i.default.DEBUG,gravity:{y:0}}},scene:[r.default,a.default,s.default,u.default,c.default,l.default,f.default,h.default,p.default]};return t.call(this,e)}return n}();n.default=v},{"./config":5,"./scenes/BackstoryScene":7,"./scenes/GameOverScene":8,"./scenes/InstructionsScene":9,"./scenes/SoundManagerScene":13,"./scenes/VictoryScene":15,"scenes/MainScene":10,"scenes/MenuScene":11,"scenes/PreloadScene":12,"scenes/UIScene":14}],3:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("../config"))&&i.__esModule?i:{default:i};function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=e("consola").withTag("Boss"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,Phaser.GameObjects.GameObject);var t,n,o,i=u(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e.scene)).sub=e.sub,t.reveal=!1,t.fullyRevealed=!1,t.revealTick=0,t.fullyRevealedTick=r.default.BOSS_REVEAL_TIME,t.pingTick=0,t.pingInterval=1e3,t.trackSub=!0,t.eyesSprite=e.scene.add.sprite(e.eyes.x,e.eyes.y,e.eyes.key),t.eyesSprite.setVisible(!1),t.face=e.scene.add.sprite(0,0,"boss-face"),t.face.setVisible(!1),t.face.setDepth(-100),t.subSprite=e.scene.add.sprite(-10,-5,"sub-image"),t.subSprite.setDepth(1),t.subSprite.setVisible(!1),t.subSprite.setScale(.5),t.teeth=e.scene.add.sprite(0,0,"boss-teeth"),t.teeth.setVisible(!1),t.teeth.setDepth(100),t.bossContainer=e.scene.add.container(e.x,e.y,[t.eyesSprite,t.face,t.subSprite,t.teeth]),e.scene.add.existing(t.bossContainer),t}return t=c,(n=[{key:"update",value:function(e){if(this.trackSub&&(this.bossContainer.x=this.sub.subMatterContainer.x,this.bossContainer.y=this.sub.subMatterContainer.y),this.reveal&&!this.fullyRevealed){this.revealTick+=e/1e3;var t=Phaser.Display.Color.Interpolate.RGBWithRGB(0,0,0,65,65,65,this.fullyRevealedTick,this.revealTick);this.eyesSprite.setTint(Phaser.Display.Color.ValueToColor(t).color),this.revealTick>=this.fullyRevealedTick&&(this.sub.subContainer.setVisible(!1),this.fullyRevealed=!0,this.eyesSprite.setTint(16777215),this.face.setVisible(!0),this.subSprite.setVisible(!0),this.teeth.setVisible(!0),this.face.play("bossFaceAnim"),this.teeth.play("bossTeethAnim"),this.trackSub=!1,this.scene.events.emit("bossAttack"))}}},{key:"setReveal",value:function(e){this.eyesSprite.setVisible(e),e||(this.face.setVisible(!1),this.teeth.setVisible(!1)),!this.reveal&&e&&(this.fullyRevealed||(this.eyesSprite.setTint(0),this.revealTick=0,this.pingTick=0,this.pingInterval=1e3,this.scene.time.addEvent({delay:this.pingInterval,loop:!1,callback:this.startPings,callbackScope:this}))),this.reveal=e}},{key:"startPings",value:function(){var e=this;this.reveal&&!this.fullyRevealed&&(this.scene.time.addEvent({delay:this.pingInterval,loop:!1,callback:function(){e.pingInterval=Phaser.Math.Linear(1e3,100,e.revealTick/e.fullyRevealedTick),e.startPings()},callbackScope:this}),f.info("ping"),this.scene.events.emit("ping"))}}])&&s(t.prototype,n),o&&s(t,o),c}();n.default=h},{"../config":5,consola:1}],4:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("../config"))&&i.__esModule?i:{default:i};function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=e("consola").withTag("Sub"),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,Phaser.GameObjects.GameObject);var t,n,o,i=u(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e.scene)).hasWon=!1,t.subSprite=e.scene.add.sprite(e.sub.x,e.sub.y,e.sub.key),t.subSprite.setPipeline("Light2D"),t.propSprite=e.scene.add.sprite(e.prop.x,e.prop.y,e.prop.key).play("propellerAnimation"),t.propSprite.setPipeline("Light2D"),t.plunger=e.scene.add.rectangle(-120,-15,25,25),t.subContainer=e.scene.add.container(e.pos.x,e.pos.y,[t.propSprite,t.subSprite,t.plunger]);var n=e.scene.matter.world.nextGroup();return t.subMatterContainer=e.scene.matter.add.gameObject(t.subContainer,{shape:e.subShape}),t.subMatterContainer.setScale(.5,.5),t.subMatterContainer.setCollisionGroup(n),t.lightLocation={x:135-t.subSprite.width/2,y:20-t.subSprite.height/2},t.lightColor=16777215,t.lightChargeLevel=1,t.health=1,t.hasLoot=!1,t.disabled=!1,e.scene.time.addEvent({delay:1e3,loop:!0,callback:t.lightPowerTick,callbackScope:l(t)}),t.createLights(e.scene),t.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE).on("down",(function(){t.toggleLights()})),t}return t=c,(n=[{key:"lightPowerTick",value:function(){!this.lightIsOn()||r.default.LIGHTS_ALWAYS_ON||this.isDead()||(this.lightChargeLevel=Phaser.Math.Clamp(this.lightChargeLevel-.1,0,1),0===this.lightChargeLevel&&(h.info("out of power"),this.toggleLights()),this.scene.events.emit("lightChargeChanged",this.lightChargeLevel))}},{key:"update",value:function(e){if(!this.disabled){if(!this.isDead()){var t=r.default.SKY_HEIGHT-60+this.subSprite.height/2,n=this.subMatterContainer.y<t;this.hasWon||this.handleInput(e,n);var o=Phaser.Math.Linear(this.subMatterContainer.rotation,0,.2);this.subMatterContainer.setRotation(o),n&&(this.subMatterContainer.y=t)}this.light.x=this.lightLocation.x+this.subMatterContainer.x,this.light.y=this.lightLocation.y+this.subMatterContainer.y}}},{key:"flickerLights",value:function(){h.info("flicker");var e=Phaser.Math.Between(100,500);this.scene.time.addEvent({delay:e,loop:!1,callback:this.flickerLights,callbackScope:this}),this.toggleLights()}},{key:"toggleLights",value:function(){!this.lightIsOn()&&this.lightChargeLevel>0?(this.light.setRadius(300),this.isDead()||this.scene.events.emit("lightsOn")):(this.light.setEmpty(),this.isDead()||this.scene.events.emit("lightsOff"))}},{key:"lightIsOn",value:function(){return!this.light.isEmpty()}},{key:"createLights",value:function(e){this.light=e.lights.addLight(this.lightLocation.x+this.subMatterContainer.x,this.lightLocation.y+this.subMatterContainer.y,300).setColor(this.lightColor).setIntensity(5),this.light.setEmpty()}},{key:"pickupGlowFish",value:function(){h.info("picked up glowfish"),this.lightChargeLevel=Phaser.Math.Clamp(this.lightChargeLevel+.3,0,1),this.scene.events.emit("lightChargeChanged",this.lightChargeLevel),this.scene.events.emit("pickupGlowFish")}},{key:"takeDamage",value:function(e){r.default.INVULNERABLE||(this.health=Phaser.Math.Clamp(this.health-e,0,1),this.scene.events.emit("healthChanged",this.health),this.health<=.3&&(this.hasLoot?this.subSprite.setTexture("sub-loot-damaged-image"):this.subSprite.setTexture("sub-damaged-image")),0===this.health&&(h.info("dead"),this.propSprite.anims.stop()))}},{key:"isDead",value:function(){return 0===this.health}},{key:"flipX",value:function(e){"left"===e?this.subMatterContainer.setScale(.5,.5):"right"===e&&this.subMatterContainer.setScale(-.5,.5)}},{key:"collectLoot",value:function(){this.subSprite.setTexture("sub-loot-image"),this.hasLoot=!0}},{key:"deliverLoot",value:function(){this.subSprite.setTexture("sub-image"),this.hasLoot=!1}},{key:"handleInput",value:function(e,t){e.W.isDown&&!t&&this.subMatterContainer.thrustLeft(r.default.THRUST_POWER),e.A.isDown&&(this.subMatterContainer.thrustBack(r.default.THRUST_POWER),this.flipX("left")),e.S.isDown&&this.subMatterContainer.thrustRight(r.default.THRUST_POWER),e.D.isDown&&(this.subMatterContainer.thrust(r.default.THRUST_POWER),this.flipX("right"))}},{key:"disabledByBoss",value:function(e){this.disabled=!0,this.subMatterContainer.setVelocity(0,0),this.subMatterContainer.setRotation(0),this.subSprite.resetPipeline(),this.propSprite.resetPipeline(),this.propSprite.anims.stop(),this.subMatterContainer.y=e.bossContainer.y+20}}])&&s(t.prototype,n),o&&s(t,o),c}();n.default=p},{"../config":5,consola:1}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={GAME_WIDTH:1024,GAME_HEIGHT:576,WORLD_WIDTH:2e3,WORLD_HEIGHT:3e3,DEBUG:!1,THRUST_POWER:85e-5,LIGHTS_ALWAYS_ON:!1,INVULNERABLE:!1,SKY_HEIGHT:100,GRAVITY:.08,DISABLE_SOUNDS:!1,BOSS_REVEAL_DEPTH:2300,BOSS_REVEAL_TIME:7,FADE_DURATION:250,ROCK_DAMAGE:.25,MAX_DARK_DEPTH:2300};"dev"===ENV?o.LOG_LEVEL=1/0:"prod"===ENV&&(o.LOG_LEVEL=3);var i=o;n.default=i},{}],6:[function(e,t,n){"use strict";var o,i=(o=e("./Game.js"))&&o.__esModule?o:{default:o};window.addEventListener("load",(function(){new i.default}))},{"./Game.js":2}],7:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("../config"))&&i.__esModule?i:{default:i};function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=e("consola").withTag("BackstoryScene"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,Phaser.Scene);var t,n,o,i=u(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,{key:"BackstoryScene"})}return t=c,(n=[{key:"create",value:function(e){var t=this;f.info("Create"),this.cameras.main.fadeIn(r.default.FADE_DURATION,0,0,0),this.add.image(0,0,"backstory-image").setOrigin(0,0),this.playButton=this.add.sprite(r.default.GAME_WIDTH/2+200,r.default.GAME_HEIGHT-120,"button-letsgo-20-image"),this.playButton.setInteractive(),this.playButton.setScale(.5),this.playButton.on("pointerover",(function(){t.playButton.setTexture("button-letsgo-50-image")})),this.playButton.on("pointerout",(function(){t.playButton.setTexture("button-letsgo-20-image")})),this.playButton.on("pointerup",(function(){t.cameras.main.fadeOut(r.default.FADE_DURATION,0,0,0),t.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(function(){t.events.emit("mainGameMusic"),t.scene.start("MainScene")}))}))}}])&&s(t.prototype,n),o&&s(t,o),c}();n.default=h},{"../config":5,consola:1}],8:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("../config"))&&i.__esModule?i:{default:i};function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,Phaser.Scene);var t,n,o,i=u(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,{key:"GameOverScene"})}return t=c,(n=[{key:"create",value:function(){var e=this;this.gameOverSprite=this.add.sprite(r.default.GAME_WIDTH/2,r.default.GAME_HEIGHT/2,"game_over_screen-text-image"),this.playButton=this.add.sprite(r.default.GAME_WIDTH/2,r.default.GAME_HEIGHT-120,"button-playagain-20-image"),this.playButton.setInteractive(),this.playButton.setScale(.5),this.playButton.on("pointerover",(function(){e.playButton.setTexture("button-playagain-50-image")})),this.playButton.on("pointerout",(function(){e.playButton.setTexture("button-playagain-20-image")})),this.playButton.on("pointerup",(function(){if(e.scene.isVisible()){var t=e.scene.get("MainScene"),n=e.scene.get("UIScene");e.events.emit("mainGameMusic"),n.scene.restart(),t.scene.restart(),e.hide()}})),this.hide()}},{key:"show",value:function(e){"rocks"===e?this.gameOverSprite.setTexture("game_over_screen-text-image"):"monster"===e&&this.gameOverSprite.setTexture("game_over_screen-text-02-image"),this.playButton.setInteractive(),this.scene.setVisible(!0)}},{key:"hide",value:function(){this.playButton.disableInteractive(),this.scene.setVisible(!1)}}])&&s(t.prototype,n),o&&s(t,o),c}();n.default=f},{"../config":5}],9:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("../config"))&&i.__esModule?i:{default:i};function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=e("consola").withTag("InstructionsScene"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,Phaser.Scene);var t,n,o,i=u(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,{key:"InstructionsScene"})}return t=c,(n=[{key:"create",value:function(e){var t=this;f.info("Create");var n=this.add.image(0,0,"tutorial_screen-image");n.setOrigin(0,0),n.setScale(.55),this.playButton=this.add.sprite(r.default.GAME_WIDTH/2,r.default.GAME_HEIGHT-50,"button-play-20-image"),this.playButton.setInteractive(),this.playButton.setScale(.5),this.playButton.on("pointerover",(function(){t.playButton.setTexture("button-play-50-image")})),this.playButton.on("pointerout",(function(){t.playButton.setTexture("button-play-20-image")})),this.playButton.on("pointerup",(function(){t.cameras.main.fadeOut(r.default.FADE_DURATION,0,0,0),t.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(function(){t.scene.start("BackstoryScene")}))}))}}])&&s(t.prototype,n),o&&s(t,o),c}();n.default=h},{"../config":5,consola:1}],10:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=a(e("../actors/Boss")),r=a(e("../config")),s=a(e("../actors/Sub"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=e("consola").withTag("MainScene"),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,Phaser.Scene);var t,n,o,a=l(f);function f(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),a.call(this,{key:"MainScene"})}return t=f,(n=[{key:"preload",value:function(){}},{key:"create",value:function(){var e=this;p.info("Create"),this.cameras.main.fadeIn(r.default.FADE_DURATION,0,0,0),this.victory=!1,this.scene.setVisible(!0,"UIScene"),this.scene.get("GameOverScene").hide(),this.scene.get("VictoryScene").hide(),this.lights.enable().setAmbientColor(1118481);var t=this.add.graphics();t.fillStyle(10079487),t.fillRect(0,0,r.default.WORLD_WIDTH,r.default.SKY_HEIGHT),this.add.image(150,50,"cloud-image"),this.add.image(900,45,"cloud-image"),this.add.image(1800,40,"cloud-image"),this.bargeSprite=this.add.sprite(1e3,80,"barge-image"),this.bargeSprite.scale=1.2,this.shapes=this.cache.json.get("shapes"),this.matter.world.setBounds(0,0,r.default.WORLD_WIDTH,r.default.WORLD_HEIGHT);var n=this.matter.add.sprite(0,0,"ground-image",null,{shape:this.shapes.ground});n.setDepth(-2),this.bubbles=[];for(var o=0;o<10;o++)this.generateBubbles(200,1800,200,1e3);this.time.addEvent({delay:2e3,loop:!0,callback:this.generateBubbles,callbackScope:this}),n.setPosition(975+n.centerOfMass.x,1820+n.centerOfMass.y),n.setPipeline("Light2D"),this.sub=new s.default({scene:this,sub:{x:-22,y:-20,key:"sub-image"},prop:{x:82,y:36,key:"propeller"},pos:{x:1e3,y:130},subShape:this.shapes.Sub_Base}),this.boss=new i.default({scene:this,sub:this.sub,eyes:{x:0,y:0,key:"boss-eyes-image"},x:800,y:300}),this.events.on("lightsOn",(function(){p.info("lights on"),e.boss.reveal&&e.boss.setReveal(!1)})),this.events.on("bossAttack",(function(){e.sub.disabledByBoss(e.boss),e.time.addEvent({delay:4e3,loop:!1,callback:function(){e.scene.get("GameOverScene").show("monster"),e.events.emit("lose")},callbackScope:e})})),this.glowFishArray=[],this.glowFishGroup=this.matter.world.nextGroup(!0);for(var a=0;a<10;a++){var u=Phaser.Math.Between(200,1500),c=Phaser.Math.Between(r.default.SKY_HEIGHT+50,300),l=Phaser.Math.Between(0,30),f=this.matter.add.sprite(u,c,"glow-fish").play({key:"glowFishAnimation",startFrame:l});f.setCollisionGroup(-1),f.setCollidesWith([]),f.setScale(.25,.25),f.setPipeline("Light2D"),f.directionX=Phaser.Math.Between(-1,1),f.setIgnoreGravity(!0),f.setDepth(-1),0===f.directionX&&(f.directionX=-1),this.glowFishArray.push(f)}this.createShipwreckLoot(),this.collisionChecks(),this.cameras.main.setBounds(0,0,r.default.WORLD_WIDTH,r.default.WORLD_HEIGHT),this.cameras.main.startFollow(this.sub.subMatterContainer,!1,.05,.05),this.cameras.main.setBackgroundColor(16512),this.input.on("pointerdown",(function(t){e.sub.isDead()||e.sub.disabled||e.sub.toggleLights()})),this.keys=this.input.keyboard.addKeys("W,S,A,D")}},{key:"collisionChecks",value:function(){var e=this;this.matter.world.on("collisionstart",(function(t,n,o){var i=null,s=null;n.gameObject===e.sub.subMatterContainer?(i=n,s=o):o.gameObject===e.sub.subMatterContainer&&(i=o,s=n),i&&!e.sub.isDead()&&s&&("loot"===s.parent.label?e.collectLoot(s):0===s.collisionFilter.group?(p.info("collided with ground"),e.sub.takeDamage(r.default.ROCK_DAMAGE),e.sub.isDead()&&(e.matter.world.setGravity(0,r.default.GRAVITY),e.scene.get("GameOverScene").show("rocks"),e.events.emit("lose"),e.sub.flickerLights())):p.info("unknown collision: "+s.collisionFilter.group))}))}},{key:"generateBubbles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1800,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3e3,i=Phaser.Math.Between(e,t),r=Phaser.Math.Between(n,o),s=Phaser.Math.Between(5,30),a=this.add.sprite(i,r,"bubbles").play({key:"bubblesAnimation",frameRate:s});a.setScale(.25,.25),a.setPipeline("Light2D"),a.setOrigin(0,0),a.setDepth(1e3),a.tint=6707,this.bubbles.push(a)}},{key:"update",value:function(e,t){var n=this;this.victory||this.sub.update(this.keys),this.sub.subMatterContainer.y>r.default.BOSS_REVEAL_DEPTH&&!this.sub.lightIsOn()&&!this.sub.isDead()?this.boss.setReveal(!0):this.sub.subMatterContainer.y<r.default.BOSS_REVEAL_DEPTH&&this.boss.reveal&&this.boss.setReveal(!1),this.boss.update(t),this.setAmbientColor(),this.bubbles.forEach((function(e,n,o){e.y-=50*t/1e3,e.y<r.default.SKY_HEIGHT&&(e.destroy(),o.splice(n,1))})),this.glowFishArray.forEach((function(e,t,o){Phaser.Geom.Intersects.RectangleToRectangle(n.sub.plunger.getBounds(),e.getBounds())?n.sub.lightChargeLevel<1&&(n.sub.pickupGlowFish(),e.destroy(),o.splice(t,1)):(e.setVelocityX(.5*e.directionX),e.flipX=e.directionX<0,e.x<100?e.directionX=1:e.x>1800&&(e.directionX=-1))}),this),Phaser.Math.Distance.BetweenPoints(this.sub.subContainer,this.bargeSprite)<120&&this.sub.hasLoot&&this.deliverLoot()}},{key:"setAmbientColor",value:function(){var e=Phaser.Display.Color.HexStringToColor("0x449df6"),t=Phaser.Display.Color.HexStringToColor("0x0"),n=Phaser.Math.Clamp(this.sub.subMatterContainer.y,0,2300),o=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,2300,n),i=Phaser.Display.Color.ValueToColor(o).color;this.lights.setAmbientColor(i),this.cameras.main.setBackgroundColor(o)}},{key:"createShipwreckLoot",value:function(){var e=[{loot:{x:315,y:2880},wreck:{x:275,y:2880}},{loot:{x:1045,y:2870},wreck:{x:1e3,y:2870}},{loot:{x:1800,y:2920},wreck:{x:1760,y:2920}}][Phaser.Math.Between(0,2)],t=this.matter.add.image(e.loot.x,e.loot.y,"loot-image",null,{shape:this.shapes.Loot,label:"loot"});t.setScale(.5,.5),t.setPipeline("Light2D");var n=this.add.image(e.wreck.x,e.wreck.y,"wreck-image");n.setScale(.5,.5),n.setPipeline("Light2D")}},{key:"collectLoot",value:function(e){e.gameObject.destroy(),this.sub.collectLoot(),this.events.emit("loot")}},{key:"deliverLoot",value:function(){p.log("Loot delivered"),this.bargeSprite.setTexture("barge-filled-image"),this.events.emit("loot"),this.sub.deliverLoot(),this.scene.get("VictoryScene").show(),this.events.emit("win"),this.sub.hasWon=!0}}])&&u(t.prototype,n),o&&u(t,o),f}();n.default=y},{"../actors/Boss":3,"../actors/Sub":4,"../config":5,consola:1}],11:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("../config"))&&i.__esModule?i:{default:i};function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=e("consola").withTag("MenuScene"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,Phaser.Scene);var t,n,o,i=u(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,{key:"MenuScene"})}return t=c,(n=[{key:"create",value:function(e){var t=this;f.info("Create"),this.events.emit("mainMenuMusic"),this.add.image(0,0,"title-scene-image").setOrigin(0,0),this.playButton=this.add.sprite(r.default.GAME_WIDTH/2,r.default.GAME_HEIGHT-100,"button-play-20-image"),this.playButton.setInteractive(),this.playButton.setScale(.5),this.playButton.on("pointerover",(function(){t.playButton.setTexture("button-play-50-image")})),this.playButton.on("pointerout",(function(){t.playButton.setTexture("button-play-20-image")})),this.playButton.on("pointerup",(function(){t.cameras.main.fadeOut(r.default.FADE_DURATION,0,0,0),t.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(function(){t.scene.start("BackstoryScene")}))})),this.instructionsButton=this.add.sprite(r.default.GAME_WIDTH/2,r.default.GAME_HEIGHT-50,"button-instructions-20-image"),this.instructionsButton.setInteractive(),this.instructionsButton.setScale(.5),this.instructionsButton.on("pointerover",(function(){t.instructionsButton.setTexture("button-instructions-50-image")})),this.instructionsButton.on("pointerout",(function(){t.instructionsButton.setTexture("button-instructions-20-image")})),this.instructionsButton.on("pointerup",(function(){t.scene.start("InstructionsScene")})),this.soundActive=!0,this.muteButton=this.add.sprite(r.default.GAME_WIDTH-50,r.default.GAME_HEIGHT-50,"button-unmute-image"),this.muteButton.setInteractive(),this.muteButton.setScale(.7),this.muteButton.on("pointerup",(function(){t.soundActive?(t.muteButton.setTexture("button-mute-image"),t.game.sound.mute=!0,t.soundActive=!1):(t.muteButton.setTexture("button-unmute-image"),t.game.sound.mute=!1,t.soundActive=!0)}));var n=this.add.image(r.default.GAME_WIDTH-100,r.default.GAME_HEIGHT-50,"fullscreen",0);n.setInteractive(),n.setScale(.6),n.on("pointerup",(function(){t.scale.isFullscreen?(f.debug("Stop fullscreen"),n.setFrame(0),t.scale.stopFullscreen()):(f.debug("Start fullscreen"),n.setFrame(1),t.scale.startFullscreen())}),this)}}])&&s(t.prototype,n),o&&s(t,o),c}();n.default=h},{"../config":5,consola:1}],12:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("../config"))&&i.__esModule?i:{default:i};function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=e("consola").withTag("PreloadScene");f.level=r.default.LOG_LEVEL;var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,Phaser.Scene);var t,n,o,i=u(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,{key:"PreloadScene"})}return t=c,(n=[{key:"preload",value:function(){var e=this;f.trace("Loading assets..");var t=r.default.GAME_WIDTH/2,n=r.default.GAME_HEIGHT/2,o=t-160,i=n-25,s=this.add.graphics(),a=this.add.graphics();a.fillStyle(2236962,.8),a.fillRect(o,i,320,50);var u=this.make.text({x:t,y:n-50,text:"Loading...",style:{font:"20px monospace",fill:"#ffffff"}});u.setOrigin(.5,.5);var c=this.make.text({x:t,y:n,text:"0%",style:{font:"18px monospace",fill:"#ffffff"}});c.setOrigin(.5,.5),this.load.on("progress",(function(e){var t=parseInt(100*e)+"%";f.log("Loading..",t),c.setText(t),s.clear(),s.fillStyle(16777215,1),s.fillRect(o+10,i+10,300*e,30)})),this.load.on("complete",(function(){f.log("Loading complete."),s.destroy(),a.destroy(),u.destroy(),c.destroy(),e.scene.start("SoundManagerScene"),e.scene.start("VictoryScene"),e.scene.start("GameOverScene"),e.scene.start("UIScene")})),this.load.image("ground-image","../assets/images/ground.png"),this.load.image("sub-image","../assets/images/Sub-Base.png"),this.load.image("sub-loot-image","../assets/images/Sub_Loot.png"),this.load.image("sub-damaged-image","../assets/images/Sub-Base-damaged.png"),this.load.image("sub-loot-damaged-image","../assets/images/Sub-Loot-damaged.png"),this.load.image("wreck-image","../assets/images/Shipwreck.png"),this.load.image("loot-image","../assets/images/Loot.png"),this.load.image("barge-image","../assets/images/Barge.png"),this.load.image("barge-filled-image","../assets/images/Barge_Filled.png"),this.load.image("boss-eyes-image","../assets/images/Boss-Eyes_Only_v2.png"),this.load.image("title-scene-image","../assets/images/SubGameTitleFrame_v4.png"),this.load.image("backstory-image","../assets/images/backstory.jpg"),this.load.image("button-instructions-20-image","../assets/images/button-instructions-20.png"),this.load.image("button-instructions-50-image","../assets/images/button-instructions-50.png"),this.load.image("button-letsgo-20-image","../assets/images/button-letsgo-20.png"),this.load.image("button-letsgo-50-image","../assets/images/button-letsgo-50.png"),this.load.image("button-mute-image","../assets/images/button-mute.png"),this.load.image("button-unmute-image","../assets/images/button-unmute.png"),this.load.image("button-play-20-image","../assets/images/button-play-20.png"),this.load.image("button-play-50-image","../assets/images/button-play-50.png"),this.load.image("button-playagain-20-image","../assets/images/button-playagain-20.png"),this.load.image("button-playagain-50-image","../assets/images/button-playagain-50.png"),this.load.image("cloud-image","../assets/images/clouds.png"),this.load.image("game_over_screen-text-image","../assets/images/game_over_screen-text.png"),this.load.image("game_over_screen-text-02-image","../assets/images/game_over_screen-text-02.png"),this.load.image("tutorial_screen-image","../assets/images/tutorial_screen.jpg"),this.load.image("victory_screen-text-image","../assets/images/victory_screen-text.png"),this.load.image("light-icon-image","../assets/images/Light_Icon.png"),this.load.image("health-icon-image","../assets/images/Health_Icon.png"),this.load.spritesheet("fullscreen","../assets/images/fullscreen-white.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("propeller","../assets/images/Sub-Prop-sprite-sheet.png",{frameWidth:56,frameHeight:26}),this.load.spritesheet("glow-fish","../assets/images/Glow_Fish_Animated-Spritesheet.png",{frameWidth:220,frameHeight:114}),this.load.spritesheet("bubbles","../assets/images/Bubbles_Spritesheet.png",{frameWidth:154,frameHeight:300}),this.load.spritesheet("boss-face","../assets/images/Boss-Face_Animated-Spritesheet_v2.png",{frameWidth:256,frameHeight:256}),this.load.spritesheet("boss-teeth","../assets/images/Boss-Teeth_Animated-Spritesheet_v2.png",{frameWidth:256,frameHeight:256}),this.load.json("shapes","assets/json/shapes.json"),this.load.audio("sub-crash","../assets/sounds/hit-scrap.mp3"),this.load.audio("lights-on","../assets/sounds/lights-on.mp3"),this.load.audio("lights-off","../assets/sounds/lights-off.mp3"),this.load.audio("swallow","../assets/sounds/swallow.mp3"),this.load.audio("propeller","../assets/sounds/propeller.mp3"),this.load.audio("main-music","../assets/sounds/ld48-ambient-play-music.mp3"),this.load.audio("menu-music","../assets/sounds/music-title-page.mp3"),this.load.audio("bubble1","../assets/sounds/bubble1.mp3"),this.load.audio("bubble2","../assets/sounds/bubble2.mp3"),this.load.audio("bubble3","../assets/sounds/bubble3.mp3"),this.load.audio("whale","../assets/sounds/whale.mp3"),this.load.audio("sea-creature1","../assets/sounds/sea-creature1.mp3"),this.load.audio("sea-creature2","../assets/sounds/sea-creature2.mp3"),this.load.audio("hungry-monster","../assets/sounds/hungry-monster.mp3"),this.load.audio("sonar","../assets/sounds/sonar-very-short.mp3"),this.load.audio("win-music","../assets/sounds/ld48-victory.mp3"),this.load.audio("lose-music","../assets/sounds/ld48-gameover.mp3"),this.load.audio("coins-collection","../assets/sounds/coins-collection.mp3")}},{key:"create",value:function(){f.success("Game loaded");var e={key:"propellerAnimation",frames:this.anims.generateFrameNumbers("propeller",{start:0,end:3,first:0}),frameRate:20,repeat:-1};this.anims.create(e);var t={key:"glowFishAnimation",frames:this.anims.generateFrameNumbers("glow-fish",{start:0,end:30,first:0}),frameRate:20,repeat:-1};this.anims.create(t);var n={key:"bubblesAnimation",frames:this.anims.generateFrameNumbers("bubbles",{start:0,end:30,first:0}),frameRate:20,repeat:-1};this.anims.create(n);var o={key:"bossFaceAnim",frames:this.anims.generateFrameNumbers("boss-face",{start:0,end:30,first:0}),frameRate:30};this.anims.create(o);var i={key:"bossTeethAnim",frames:this.anims.generateFrameNumbers("boss-teeth",{start:0,end:30,first:0}),frameRate:30};this.anims.create(i),this.scene.start("MenuScene")}}])&&s(t.prototype,n),o&&s(t,o),c}();n.default=h},{"../config":5,consola:1}],13:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("../config"))&&i.__esModule?i:{default:i};function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=e("consola").withTag("SoundManagerScene"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,Phaser.Scene);var t,n,o,i=u(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,{key:"SoundManagerScene"})}return t=c,(n=[{key:"preload",value:function(){}},{key:"create",value:function(){var e=this;r.default.DISABLE_SOUNDS||(f.info("Creating Sound Manager"),this.miscSounds=[this.sound.add("bubble1"),this.sound.add("bubble2"),this.sound.add("bubble3"),this.sound.add("whale"),this.sound.add("sea-creature1"),this.sound.add("sea-creature2")],this.scene.get("MainScene").time.addEvent({delay:5e3,loop:!1,callback:this.playRandomSound,callbackScope:this}),this.subCrash=this.sound.add("sub-crash"),this.lightsOn=this.sound.add("lights-on"),this.lightsOff=this.sound.add("lights-off"),this.swallow=this.sound.add("swallow"),this.propeller=this.sound.add("propeller"),this.bossAttack=this.sound.add("hungry-monster"),this.sonar=this.sound.add("sonar"),this.coins=this.sound.add("coins-collection"),this.menuMusic=this.sound.add("menu-music"),this.mainMusic=this.sound.add("main-music"),this.winMusic=this.sound.add("win-music"),this.loseMusic=this.sound.add("lose-music"),this.menuScene=this.scene.get("MenuScene"),this.bacstoryScene=this.scene.get("BackstoryScene"),this.victoryScene=this.scene.get("VictoryScene"),this.gameOverScene=this.scene.get("GameOverScene"),this.gameScene=this.scene.get("MainScene"),this.gameScene.events.on("healthChanged",(function(t){e.subCrash.play(),0===t&&e.propeller.stop()})),this.gameScene.events.on("lightsOn",(function(){e.lightsOn.play()})),this.gameScene.events.on("lightsOff",(function(){e.lightsOff.play()})),this.gameScene.events.on("pickupGlowFish",(function(){e.swallow.play({volume:.5})})),this.gameScene.events.on("bossAttack",(function(){e.bossAttack.play()})),this.gameScene.events.on("ping",(function(){e.sonar.play()})),this.gameScene.events.on("win",(function(){e.mainMusic.stop(),e.winMusic.play({loop:!0,volume:.25})})),this.gameScene.events.on("lose",(function(){e.mainMusic.stop(),e.loseMusic.play({loop:!0,volume:.25})})),this.gameScene.events.on("loot",(function(){e.coins.play()})),this.menuMusic.play(),this.menuScene.events.on("mainGameMusic",(function(){e.startMainGameSounds()})),this.bacstoryScene.events.on("mainGameMusic",(function(){e.startMainGameSounds()})),this.victoryScene.events.on("mainGameMusic",(function(){e.startMainGameSounds()})),this.gameOverScene.events.on("mainGameMusic",(function(){e.startMainGameSounds()})))}},{key:"playRandomSound",value:function(){var e=Phaser.Math.Between(15e3,3e3);this.scene.get("MainScene").time.addEvent({delay:e,loop:!1,callback:this.playRandomSound,callbackScope:this});var t=Phaser.Math.Between(0,this.miscSounds.length-1);this.miscSounds[t].play()}},{key:"startMainGameSounds",value:function(){f.log("playing main game sounds"),this.menuMusic.stop(),this.loseMusic.stop(),this.winMusic.stop(),this.mainMusic.play({loop:!0,volume:.25}),this.propeller.play({loop:!0})}}])&&s(t.prototype,n),o&&s(t,o),c}();n.default=h},{"../config":5,consola:1}],14:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("../config"))&&i.__esModule?i:{default:i};function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=e("consola").withTag("UIScene"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,Phaser.Scene);var t,n,o,i=u(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,{key:"UIScene"})}return t=c,(n=[{key:"create",value:function(){var e=this;f.info("Create"),this.scene.setVisible(!1),this.gameScene=this.scene.get("MainScene"),this.gameScene.events.on("lightChargeChanged",(function(t){e.drawPowerBar(t)})),this.gameScene.events.on("healthChanged",(function(t){e.drawHealthBar(t)})),this.powerBar=this.add.graphics(),this.healthBar=this.add.graphics(),this.drawPowerBar(1),this.drawHealthBar(1)}},{key:"drawPowerBar",value:function(e){var t=r.default.GAME_WIDTH/2-350,n=r.default.GAME_HEIGHT-50,o=this.add.image(t-30,n-10,"light-icon-image");o.setOrigin(0,0),o.setScale(.8),this.powerBar.fillStyle(5592405),this.powerBar.fillRect(t,n,150,20),this.powerBar.fillStyle(16777200),this.powerBar.fillRect(t,n,150*e,20)}},{key:"drawHealthBar",value:function(e){var t=r.default.GAME_WIDTH/2+200,n=r.default.GAME_HEIGHT-50,o=this.add.image(t-35,n-7,"health-icon-image");o.setOrigin(0,0),o.setScale(.8),this.powerBar.fillStyle(5592405),this.powerBar.fillRect(t,n,150,20),this.powerBar.fillStyle(16777200),this.powerBar.fillRect(t,n,150*e,20)}}])&&s(t.prototype,n),o&&s(t,o),c}();n.default=h},{"../config":5,consola:1}],15:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i,r=(i=e("../config"))&&i.__esModule?i:{default:i};function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=e("consola").withTag("VictoryScene"),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,Phaser.Scene);var t,n,o,i=u(c);function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,{key:"VictoryScene"})}return t=c,(n=[{key:"create",value:function(){var e=this;f.log("Create"),this.add.image(r.default.GAME_WIDTH/2,r.default.GAME_HEIGHT/2,"victory_screen-text-image"),this.playButton=this.add.sprite(r.default.GAME_WIDTH/2,r.default.GAME_HEIGHT-120,"button-playagain-20-image"),this.playButton.setInteractive(),this.playButton.setScale(.5),this.playButton.on("pointerover",(function(){e.playButton.setTexture("button-playagain-50-image")})),this.playButton.on("pointerout",(function(){e.playButton.setTexture("button-playagain-20-image")})),this.playButton.on("pointerup",(function(){if(e.scene.isVisible()){var t=e.scene.get("MainScene"),n=e.scene.get("UIScene");e.events.emit("mainGameMusic"),n.scene.restart(),t.scene.restart(),e.hide()}})),this.hide()}},{key:"show",value:function(){this.playButton.setInteractive(),this.scene.setVisible(!0)}},{key:"hide",value:function(){this.playButton.disableInteractive(),this.scene.setVisible(!1)}}])&&s(t.prototype,n),o&&s(t,o),c}();n.default=h},{"../config":5,consola:1}]},{},[6]);